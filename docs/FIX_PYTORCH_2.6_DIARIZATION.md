# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ PyTorch 2.6 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ diarization

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥–µ–ª–∏ diarization:
```
Weights only load failed. This file can still be loaded, to do so you have two options...
WeightsUnpickler error: Unsupported global: GLOBAL torch.torch_version.TorchVersion
```

**–ü—Ä–∏—á–∏–Ω–∞:** PyTorch 2.6 –∏–∑–º–µ–Ω–∏–ª –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è `weights_only` –≤ `torch.load` —Å `False` –Ω–∞ `True` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ú–æ–¥–µ–ª–∏ pyannote.audio –∏—Å–ø–æ–ª—å–∑—É—é—Ç `TorchVersion`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ!** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ PyTorch 2.6+.

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–í `download_diarization_model.py`:**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `TorchVersion` —á–µ—Ä–µ–∑ `add_safe_globals`
   - –≠—Ç–æ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥–µ–ª–µ–π pyannote

2. **–í `speech_recognition_optimized.py`:**
   - –¢–æ –∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã diarization –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞:

```powershell
cd C:\prj\converter\backend
.\download_diarization.ps1
```

---

## üîç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è)

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤—Å–µ –µ—â–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å pyannote.audio:

```powershell
.\venv\Scripts\Activate.ps1
pip install --upgrade pyannote.audio
```

–ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å PyTorch (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```powershell
pip install torch==2.5.1
```

---

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ú–æ–¥–µ–ª—å diarization –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å PyTorch 2.6+
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è whitelist)

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞!**


